<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agência Douro | Projeto Imobiliário</title>
    <link rel="icon" href="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/Logo%20DOURO%20Transparent1.png" type="image/png">
    
    <!-- Google Fonts: Montserrat para títulos y Lato para texto -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

    <style>
        /* --- RESET Y ESTILOS GLOBALES --- */
        :root {
            --color-primario: #1a1a1a; /* Negro/Gris muy oscuro (se mantiene) */
            --color-secundario: #6c757d; /* Gris para texto secundario (se mantiene) */
            --color-fondo-claro: #fbf9f6; /* NUEVO: Crema muy claro para el fondo principal */
            --color-fondo-oscuro: #f4f0e9; /* NUEVO: Beige suave para secciones alternas */
            --color-blanco: #ffffff; /* Blanco para elementos como tarjetas y navbar */
            --sombra-suave: 0 4px 15px rgba(0, 0, 0, 0.05);
            --fuente-titulos: 'Montserrat', sans-serif;
            --fuente-cuerpo: 'Lato', sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            border-radius: 0; /* Esquinas rectas para todos los elementos */
        }

        html {
            scroll-behavior: smooth;
            font-size: 16px;
        }

        body {
            font-family: var(--fuente-cuerpo);
            background-color: var(--color-fondo-claro); /* CAMBIO: fondo principal más cálido */
            color: var(--color-primario);
            line-height: 1.7;
        }
        
        h1, h2, h3, h4 {
            font-family: var(--fuente-titulos);
            font-weight: 600;
        }

        h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            text-align: center;
            font-weight: 400;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        p {
            margin-bottom: 1rem;
            color: var(--color-secundario);
            max-width: 700px; /* Limita el ancho de los párrafos para mejorar la lectura */
        }

        ul {
            list-style-position: inside;
            padding-left: 1rem;
            margin-bottom: 1.5rem;
        }

        li {
            margin-bottom: 0.5rem;
        }

        .container {
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        section {
            padding: 6rem 0;
        }

        .btn {
            display: inline-block;
            padding: 12px 28px;
            border: 1px solid var(--color-primario);
            background-color: transparent;
            color: var(--color-primario);
            text-decoration: none;
            text-transform: uppercase;
            letter-spacing: 1px;
            font-weight: 600;
            font-family: var(--fuente-titulos);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .btn:hover {
            background-color: var(--color-primario);
            color: var(--color-blanco);
        }
        
        .btn:disabled {
            background-color: #ccc;
            border-color: #ccc;
            color: #666;
            cursor: not-allowed;
        }


        /* --- BARRA DE NAVEGAÇÃO --- */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 1.5rem 2rem;
            position: fixed;
            top: 0;
            width: 100%;
            background-color: rgba(251, 249, 246, 0.85); /* CAMBIO: Color natural con transparencia */
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 0, 0, 0.05); /* CAMBIO: Borde más sutil */
            z-index: 1000;
            transition: background-color 0.3s ease;
        }

        .nav-logo {
            display: flex;
            align-items: center;
            text-decoration: none;
        }

        .nav-logo img {
            max-height: 45px; /* Altura del logo en la barra de navegación */
            width: auto;
        }

        .nav-links {
            display: flex;
            list-style: none;
        }

        .nav-links li {
            margin-left: 2.5rem;
        }

        .nav-links a {
            text-decoration: none;
            color: var(--color-primario);
            font-family: var(--fuente-titulos);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            padding-bottom: 5px;
            position: relative;
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            width: 0;
            height: 1px;
            bottom: 0;
            left: 0;
            background-color: var(--color-primario);
            transition: width 0.3s ease;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .mobile-menu-toggle {
            display: none;
            cursor: pointer;
            background: none;
            border: none;
            z-index: 1001; /* Para que esté por encima del menú */
        }
        
        .hamburger-icon {
            width: 30px;
            height: 22px;
            position: relative;
        }
        
        .hamburger-icon span {
            display: block;
            position: absolute;
            height: 2px;
            width: 100%;
            background: var(--color-primario);
            opacity: 1;
            left: 0;
            transition: all .25s ease-in-out;
        }
        
        .hamburger-icon span:nth-child(1) { top: 0px; }
        .hamburger-icon span:nth-child(2) { top: 10px; }
        .hamburger-icon span:nth-child(3) { top: 20px; }
        
        .nav-open .hamburger-icon span:nth-child(1) { top: 10px; transform: rotate(135deg); }
        .nav-open .hamburger-icon span:nth-child(2) { opacity: 0; left: -30px; }
        .nav-open .hamburger-icon span:nth-child(3) { top: 10px; transform: rotate(-135deg); }


        /* --- SEÇÃO HERO --- */
        #hero {
            height: 100vh;
            display: flex;
            align-items: flex-end; /* Alineado abajo */
            justify-content: flex-start; /* Alineado a la izquierda */
            color: var(--color-blanco);
            background-color: #333; /* Color de fondo si la imagen no carga */
            background-image: linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-8.jpg');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            transition: background-image 1s ease-in-out, opacity 0.5s ease-in-out; /* AÑADIDO: Transición suave */
        }

        .hero-fade-out {
            opacity: 0.9;
        }

        .hero-content {
            padding: 0 0 10px 6rem; /* Padding derecho eliminado para dar más espacio al texto */
            text-align: left;
            max-width: 900px; /* Ancho máximo aumentado */
        }

        .hero-content h1 {
            font-size: clamp(2rem, 4vw, 3.4rem); /* Tamaño de fuente reducido */
            font-weight: 400; /* CAMBIO: Igual que H2 */
            text-transform: uppercase; /* CAMBIO: Igual que H2 */
            margin-bottom: 1rem;
            letter-spacing: 1px;
        }

        .hero-content p {
            font-size: 1rem; /* Tamaño de fuente reducido */
            max-width: 550px; /* Ancho máximo aumentado */
            margin-bottom: 2rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 300;
        }
        
        .hero-content .btn {
            color: var(--color-blanco);
            border-color: var(--color-blanco);
        }
        
        .hero-content .btn:hover {
            background-color: var(--color-blanco);
            color: var(--color-primario);
        }

        /* --- SEÇÃO PROJETO --- */
        #proyecto .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 4rem;
            align-items: center;
        }
        
        .project-image img {
            width: 100%;
            height: auto;
            display: block;
        }

        .project-text p { margin-left: auto; margin-right: auto; }
        
        /* --- SEÇÃO AMENITIES --- */
        #amenities {
            padding: 0;
            overflow: hidden;
        }

        .amenities-carousel-wrapper {
            position: relative;
            height: 80vh;
            color: var(--color-blanco);
        }

        #amenities h2 {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10;
            text-shadow: 0 2px 8px rgba(0,0,0,0.6);
            color: var(--color-blanco);
        }

        .amenities-carousel {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            -ms-overflow-style: none;
            scrollbar-width: none;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }

        .amenities-carousel::-webkit-scrollbar {
            display: none;
        }

        .amenity-slide {
            flex: 0 0 100%; 
            max-width: 100%;
            margin-right: 0;
            position: relative;
            height: 100%;
        }

        .amenity-slide img {
            width: 100%;
            height: 100%;
            display: block;
            object-fit: cover;
        }
        
        .amenities-btn {
            top: 50%;
            z-index: 10;
        }

        .amenities-btn#amenitiesPrevBtn {
            left: 3rem;
        }

        .amenities-btn#amenitiesNextBtn {
            right: 3rem;
        }


        /* --- SEÇÃO APARTAMENTOS (CARRUSEL) --- */
        #apartamentos {
            background-color: var(--color-fondo-oscuro);
            overflow: hidden; 
        }

        .carousel-wrapper {
            position: relative;
            margin-top: 3rem;
        }

        .apartments-carousel {
            display: flex;
            overflow-x: auto;
            scroll-behavior: smooth;
            padding-bottom: 2rem; /* Espacio para que no se corte la sombra */
            -ms-overflow-style: none;  /* IE and Edge */
            scrollbar-width: none;  /* Firefox */
        }

        .apartments-carousel::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        .apartment-card {
            flex: 0 0 24%; /* Muestra 4 tarjetas  */
            max-width: 24%;
            margin-right: 1.33%;
            background-color: var(--color-blanco);
            text-align: left;
            display: flex;
            flex-direction: column;
            transition: transform 0.3s ease;
        }
        
        .apartment-image-placeholder {
            min-height: 280px;
            width: 100%;
            background-color: #e0e0e0;
            background-size: cover;
            background-position: center;
        }
        
        .apartment-card-content {
            padding: 2rem;
            border: 1px solid #eee;
            border-top: none;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
        }

        .apartment-card h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
        }
        
        .apartment-card .btn {
            margin-top: auto;
            font-size: 0.8rem;
            padding: 10px 24px;
        }

        .carousel-btn {
            position: absolute;
            top: 40%;
            transform: translateY(-50%);
            background-color: var(--color-blanco);
            border: 1px solid #eee;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.3s ease;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .carousel-btn:hover {
            background-color: var(--color-primario);
            color: var(--color-blanco);
        }

        .carousel-btn#prevBtn {
            left: -25px;
        }
        .carousel-btn#nextBtn {
            right: -25px;
        }
        
        .cta-container {
            text-align: center;
            margin-top: 3rem;
        }

        .table-container {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.7s ease-in-out;
        }

        .table-container.active {
            max-height: 2000px; /* Valor suficientemente grande para acomodar a tabela */
        }

        .apartments-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 3rem;
            font-size: 0.9rem;
        }

        .apartments-table th, .apartments-table td {
            padding: 1rem;
            border: 1px solid #ddd;
            text-align: left;
        }

        .apartments-table th {
            background-color: var(--color-fondo-claro);
            font-family: var(--fuente-titulos);
        }
        
        .apartments-table .reserve-btn {
            font-size: 0.8rem;
            padding: 8px 16px;
        }


        /* --- SEÇÃO LOCALIZAÇÃO --- */
        #ubicacion {
            background-color: var(--color-fondo-claro);
            padding: 6rem 0 0; /* Modificado para eliminar el padding inferior */
        }
        .map-container {
            position: relative;
            overflow: hidden;
            width: 100%;
            padding-top: 50%; /* Proporción 2:1 */
            margin-top: 3rem;
            border: none; /* Modificado para eliminar el borde */
        }

        .map-container iframe {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            border: 0;
        }
        
        #ubicacion p {
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }

        /* --- SEÇÃO AGÊNCIA DOURO --- */
        #sobre-nos {
            background-color: var(--color-primario);
            color: var(--color-blanco);
        }

        #sobre-nos h2, #sobre-nos h3 {
            color: var(--color-blanco);
        }
        
        #sobre-nos p {
            color: rgba(255, 255, 255, 0.8);
            text-align: center;
            margin-left: auto;
            margin-right: auto;
        }

        .agency-contact-details {
            margin-top: 4rem;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            padding-top: 3rem;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            align-items: center;
            gap: 2rem;
        }
        
        .contact-block {
            text-align: center;
        }

        .contact-block p {
            margin-bottom: 0.5rem;
            color: rgba(255, 255, 255, 0.8);
            font-size: 0.9rem;
        }

        .contact-block a {
            color: var(--color-blanco);
            text-decoration: none;
            transition: opacity 0.3s;
        }
        .contact-block a:hover {
            opacity: 0.8;
        }
        
        .social-icons a {
            color: var(--color-blanco);
            margin: 0 0.75rem;
            transition: opacity 0.3s;
        }
        
        .social-icons a:hover {
            opacity: 0.8;
        }

        
        /* --- SEÇÃO CONTACTO --- */
        #contacto {
            background-color: var(--color-fondo-oscuro);
        }

        #contacto p {
            text-align: center;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 3rem;
        }

        .contact-form {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1.5rem;
            max-width: 800px;
            margin: 0 auto;
        }

        .form-group {
            width: 100%;
        }

        .form-group-full {
            grid-column: 1 / -1;
        }

        .contact-form input,
        .contact-form textarea {
            width: 100%;
            padding: 1rem;
            border: 1px solid #ddd;
            background-color: var(--color-blanco);
            font-family: var(--fuente-cuerpo);
            font-size: 1rem;
            color: var(--color-primario);
            transition: border-color 0.3s ease;
        }

        .contact-form input::placeholder,
        .contact-form textarea::placeholder {
            color: #999;
        }

        .contact-form input:focus,
        .contact-form textarea:focus {
            outline: none;
            border-color: var(--color-primario);
        }

        .contact-form button {
            width: auto;
        }
        
        #form-status, #reservation-form-status {
            text-align: center;
            margin-top: 1.5rem;
            min-height: 1.5em;
            font-weight: 600;
        }
        
        .form-status-success {
            color: #28a745;
        }
        
        .form-status-error {
            color: #dc3545;
        }


        /* --- FOOTER --- */
        footer {
            background-color: var(--color-fondo-oscuro);
            text-align: center;
            padding: 3rem;
            border-top: 1px solid #ddd;
        }
        
        footer p {
            margin-bottom: 0;
            font-size: 0.9rem;
        }

        footer a {
            color: var(--color-primario);
            font-weight: 600;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        footer a:hover {
            opacity: 0.7;
        }

        /* --- ESTILOS MODAL --- */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            z-index: 2000;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            cursor: pointer;
        }

        .modal-content {
            position: relative;
            background-color: var(--color-blanco);
            padding: 3rem;
            width: 90%;
            max-width: 800px;
            max-height: 85vh;
            overflow-y: auto;
            z-index: 2001;
            transform: scale(0.9);
            transition: transform 0.3s ease;
        }
        
        .modal.active .modal-content {
            transform: scale(1);
        }

        .modal-close {
            position: absolute;
            top: 1rem;
            right: 1.5rem;
            background: none;
            border: none;
            font-size: 2.5rem;
            color: #aaa;
            cursor: pointer;
            line-height: 1;
            transition: color 0.3s ease;
        }

        .modal-close:hover {
            color: var(--color-primario);
        }

        #modal-body h4, #reservation-modal-body h4 {
            font-size: 1.2rem;
            margin-top: 2rem;
            margin-bottom: 1rem;
            border-bottom: 1px solid #eee;
            padding-bottom: 0.5rem;
        }
        
        #reservation-unit-details {
            background-color: var(--color-fondo-oscuro);
            padding: 1rem;
            margin-bottom: 2rem;
            border-left: 3px solid var(--color-primario);
        }


        /* --- ESTILOS PARA MÓVIL (RESPONSIVE) --- */
        @media (max-width: 1100px) {
             .apartment-card { flex: 0 0 31%; max-width: 31%; }
        }

        @media (max-width: 900px) {
            .apartment-card { flex: 0 0 45%; max-width: 45%; }
        }
        @media (max-width: 768px) {
            h2 { font-size: 2rem; }
            
            #hero {
                background-attachment: scroll; /* CORRECCIÓN: Desactiva el efecto parallax en móvil para compatibilidad */
            }
            
            #amenities h2 {
                font-size: 2rem;
            }

            .mobile-menu-toggle { display: block; }
            .nav-links {
                position: fixed; top: 0; left: 100%; width: 100%; height: 100vh;
                flex-direction: column; align-items: center; justify-content: center;
                background-color: var(--color-blanco);
                transition: left 0.35s ease-in-out;
            }
            .nav-links.active { left: 0; }
            .nav-links li { margin: 2rem 0; }
            #proyecto .container { grid-template-columns: 1fr; }
            .project-image { grid-row: 1; }
            .contact-form { grid-template-columns: 1fr; }
            .hero-content { padding: 0 2rem 2rem 2rem; } /* Padding inferior reducido para móvil */
            .carousel-btn { display: none; } /* Oculta botones en móvil, se usa swipe */
            .modal-content { width: 95%; padding: 2rem 1.5rem; }
            .amenities-btn { display: none; }

             /* Ocultar columnas específicas da tabela em mobile */
            .apartments-table th:nth-child(3), .apartments-table td:nth-child(3), /* Piso */
            .apartments-table th:nth-child(5), .apartments-table td:nth-child(5), /* Área Bruta */
            .apartments-table th:nth-child(6), .apartments-table td:nth-child(6), /* Área Exterior */
            .apartments-table th:nth-child(7), .apartments-table td:nth-child(7), /* Estacionamento */
            .apartments-table th:nth-child(9), .apartments-table td:nth-child(9) { /* Plantas */
                display: none;
            }
            
            .agency-contact-details {
                flex-direction: column;
            }
        }
         @media (max-width: 600px) {
            .apartment-card { flex: 0 0 85%; max-width: 85%; }
            .amenities-carousel-wrapper { height: 60vh; }
        }
    </style>
</head>
<body>

    <!-- =======================
              BARRA DE NAVEGAÇÃO
         ======================== -->
    <header>
        <nav class="navbar" id="navbar">
            <a href="#hero" class="nav-logo">
                <img src="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/Logo%20DOURO%20Transparent1.png" alt="Logo Agência Douro">
            </a>
            <ul class="nav-links" id="nav-menu">
                <li><a href="#proyecto" data-translate="nav_proyecto">O Projeto</a></li>
                <li><a href="#apartamentos" data-translate="nav_apartamentos">Apartamentos</a></li>
                <li><a href="#ubicacion" data-translate="nav_ubicacion">Localização</a></li>
                <li><a href="#sobre-nos" data-translate="nav_agencia">Agência Douro</a></li>
                <li><a href="#contacto" data-translate="nav_contacto">Contacto</a></li>
            </ul>
            <button class="mobile-menu-toggle" id="mobile-menu" aria-label="Abrir menu">
                <div class="hamburger-icon"><span></span><span></span><span></span></div>
            </button>
        </nav>
    </header>

    <main>

        <!-- ======================= SEÇÃO HERO ======================== -->
        <section id="hero">
            <div class="hero-content">
                <h1 data-translate="hero_titulo">Viver no Coração do Porto</h1>
                <p data-translate="hero_subtitulo">Um projeto exclusivo que redefine a elegância urbana. Descubra a sua nova casa no Campo Alegre.</p>
                <a href="#proyecto" class="btn" data-translate="hero_btn">Saber mais</a>
            </div>
        </section>

        <!-- ======================= SEÇÃO PROJETO ======================== -->
        <section id="proyecto">
            <div class="container">
                <div class="project-text">
                    <h2 data-translate="proyecto_titulo">Design e Exclusividade</h2>
                    <p data-translate="proyecto_p1">Este é um empreendimento residencial com uma arquitetura contemporânea, de linhas retas e sóbrias, que se integra harmoniosamente nos jardins circundantes. O piso do átrio principal dispõe de um oásis de lazer e descontração com diversas salas sociais, de wellness e jardins privados.</p>
                    <p data-translate="proyecto_p2">Os 30 apartamentos, com tipologias de T1 a T5, combinam modernidade e funcionalidade, criando ambientes confortáveis para quem procura o bem-estar. Todas as habitações, das quais duas moradias e duas penthouses, têm uma forte relação com os espaços exteriores.</p>
                </div>
                <div class="project-image">
                    <img src="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-7.jpg" alt="Fachada do edifício Campo Alegre 1024">
                </div>
            </div>
        </section>
        
        <!-- ======================= SEÇÃO AMENITIES ======================== -->
        <section id="amenities">
             <div class="amenities-carousel-wrapper">
                <h2 data-translate="amenities_titulo">Amenities</h2>
                <div class="amenities-carousel" id="amenities-carousel">
                    <div class="amenity-slide"><img src="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/INT_COMUNS%20(1).jpg" alt="Amenity 1"></div>
                    <div class="amenity-slide"><img src="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/ZONA_COMUM.jpg" alt="Amenity 2"></div>
                    <div class="amenity-slide"><img src="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/INT_COMUNS-12.jpg" alt="Amenity 3"></div>
                    <div class="amenity-slide"><img src="https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/INT_COMUNS%20(2).jpg" alt="Amenity 4"></div>
                </div>
                <button class="carousel-btn amenities-btn" id="amenitiesPrevBtn" aria-label="Anterior"><i data-feather="arrow-left"></i></button>
                <button class="carousel-btn amenities-btn" id="amenitiesNextBtn" aria-label="Seguinte"><i data-feather="arrow-right"></i></button>
            </div>
        </section>


        <!-- ======================= SEÇÃO APARTAMENTOS ======================== -->
        <section id="apartamentos">
            <div class="container">
                <h2 data-translate="apartamentos_titulo">Apartamentos Destacados</h2>
                <div class="carousel-wrapper">
                    <div class="apartments-carousel" id="apartments-carousel">
                        <!-- Card Penthouse T5 -->
                        <div class="apartment-card">
                            <div class="apartment-image-placeholder" style="background-image: url('https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/QUARTO_ULTIMO-PISO-1-2048x1205.jpg');"></div>
                            <div class="apartment-card-content">
                                <h3 data-translate="apt_penthouse_title">Penthouse T5</h3>
                                <p data-translate="apt_penthouse_desc">231 m² | 2.250.000 €</p>
                                <a href="#" class="btn" data-translate="btn_detalhes" data-apartment-id="penthouse">Mais detalhes</a>
                            </div>
                        </div>
                        <!-- Card Moradia T2+1 -->
                        <div class="apartment-card">
                            <div class="apartment-image-placeholder" style="background-image: url('https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/DUPLEX_SALA.jpg');"></div>
                            <div class="apartment-card-content">
                                <h3 data-translate="apt_moradia_title">Moradia T2+1</h3>
                                <p data-translate="apt_moradia_desc">164,50 m² | 1.215.000 €</p>
                                <a href="#" class="btn" data-translate="btn_detalhes" data-apartment-id="moradia">Mais detalhes</a>
                            </div>
                        </div>
                        <!-- Card Apartamento Pátio T2 -->
                        <div class="apartment-card">
                            <div class="apartment-image-placeholder" style="background-image: url('https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/COZINHA_QUARTO-2048x1367.jpg');"></div>
                            <div class="apartment-card-content">
                                <h3 data-translate="apt_patio_title">Apartamento Pátio T2</h3>
                                <p data-translate="apt_patio_desc">89,50 m² | 720.000 €</p>
                                <a href="#" class="btn" data-translate="btn_detalhes" data-apartment-id="patio">Mais detalhes</a>
                            </div>
                        </div>
                        <!-- Card Apartamento T1 -->
                        <div class="apartment-card">
                            <div class="apartment-image-placeholder" style="background-image: url('https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/COZINHA.jpg');"></div>
                            <div class="apartment-card-content">
                                <h3 data-translate="apt_t1_title">Apartamento T1</h3>
                                <p data-translate="apt_t1_desc">52 m² | 400.000 €</p>
                                <a href="#" class="btn" data-translate="btn_detalhes" data-apartment-id="t1">Mais detalhes</a>
                            </div>
                        </div>
                    </div>
                    <button class="carousel-btn" id="prevBtn" aria-label="Anterior"><i data-feather="arrow-left"></i></button>
                    <button class="carousel-btn" id="nextBtn" aria-label="Seguinte"><i data-feather="arrow-right"></i></button>
                </div>
                
                <div class="cta-container">
                    <button id="toggle-table-btn" class="btn" data-translate="cta_ver_tabela">Ver Todas as Frações</button>
                </div>

                <div class="table-container" id="apartments-table-container">
                    <table class="apartments-table">
                        <thead>
                            <tr>
                                <th data-translate="th_natureza">Natureza</th>
                                <th data-translate="th_tipologia">Tipologia</th>
                                <th data-translate="th_piso">Piso</th>
                                <th data-translate="th_fracao">Fração</th>
                                <th data-translate="th_area_bruta">Área Bruta</th>
                                <th data-translate="th_area_exterior">Área Exterior</th>
                                <th data-translate="th_estacionamento">Estacionamento</th>
                                <th data-translate="th_preco">Preço</th>
                                <th data-translate="th_plantas">Plantas</th>
                                <th data-translate="th_reservar">Reservas</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Data from screenshot -->
                            <tr><td>Apartamento</td><td>T1</td><td>2</td><td>E</td><td>52.00m²</td><td>7.00m²</td><td>1</td><td>400 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T1" data-fracao="2E" data-preco="400 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T1</td><td>3</td><td>E</td><td>52.00m²</td><td>7.00m²</td><td>1</td><td>415 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T1" data-fracao="3E" data-preco="415 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T1</td><td>4</td><td>E</td><td>52.00m²</td><td>7.00m²</td><td>1</td><td>435 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T1" data-fracao="4E" data-preco="435 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T1+1</td><td>1</td><td>B</td><td>95.00m²</td><td>35.00m²</td><td>1</td><td>690 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T1+1" data-fracao="1B" data-preco="690 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T1+1</td><td>1</td><td>E</td><td>95.00m²</td><td>35.00m²</td><td>1</td><td>690 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T1+1" data-fracao="1E" data-preco="690 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2</td><td>1</td><td>G</td><td>90.00m²</td><td>--</td><td>1</td><td>720 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2" data-fracao="1G" data-preco="720 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2</td><td>1</td><td>A</td><td>105.00m²</td><td>37.00m²</td><td>1</td><td>800 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2" data-fracao="1A" data-preco="800 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2</td><td>1</td><td>C</td><td>101.00m²</td><td>37.00m²</td><td>1</td><td>800 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2" data-fracao="1C" data-preco="800 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2</td><td>1</td><td>D</td><td>101.00m²</td><td>37.00m²</td><td>1</td><td>800 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2" data-fracao="1D" data-preco="800 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2+1</td><td>2</td><td>D</td><td>116.00m²</td><td>14.00m²</td><td>1</td><td>900 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2+1" data-fracao="2D" data-preco="900 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2+1</td><td>3</td><td>D</td><td>116.00m²</td><td>14.00m²</td><td>1</td><td>915 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2+1" data-fracao="3D" data-preco="915 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T2+1</td><td>4</td><td>D</td><td>116.00m²</td><td>14.00m²</td><td>1</td><td>930 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T2+1" data-fracao="4D" data-preco="930 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Moradia</td><td>T2+1</td><td>--</td><td>I</td><td>165.00m²</td><td>57.00m²</td><td>1</td><td>1 215 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="Moradia T2+1" data-fracao="I" data-preco="1 215 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Moradia</td><td>T2+1</td><td>--</td><td>H</td><td>165.00m²</td><td>57.00m²</td><td>1</td><td>1 215 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="Moradia T2+1" data-fracao="H" data-preco="1 215 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>2</td><td>B</td><td>169.00m²</td><td>20.00m²</td><td>2</td><td>1 270 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="2B" data-preco="1 270 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>2</td><td>C</td><td>170.00m²</td><td>20.00m²</td><td>2</td><td>1 270 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="2C" data-preco="1 270 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>3</td><td>B</td><td>169.00m²</td><td>20.00m²</td><td>2</td><td>1 300 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="3B" data-preco="1 300 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>3</td><td>C</td><td>170.00m²</td><td>20.00m²</td><td>2</td><td>1 300 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="3C" data-preco="1 300 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3</td><td>2</td><td>A</td><td>170.00m²</td><td>36.00m²</td><td>2</td><td>1 330 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3" data-fracao="2A" data-preco="1 330 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>4</td><td>C</td><td>170.00m²</td><td>20.00m²</td><td>2</td><td>1 330 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="4C" data-preco="1 330 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3</td><td>3</td><td>A</td><td>170.00m²</td><td>36.00m²</td><td>2</td><td>1 360 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3" data-fracao="3A" data-preco="1 360 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>5</td><td>C</td><td>170.00m²</td><td>20.00m²</td><td>1</td><td>1 385 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="5C" data-preco="1 385 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>5</td><td>D</td><td>171.00m²</td><td>20.00m²</td><td>2</td><td>1 385 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="5D" data-preco="1 385 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3+1</td><td>5</td><td>B</td><td>169.00m²</td><td>20.00m²</td><td>2</td><td>1 385 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3+1" data-fracao="5B" data-preco="1 385 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T3</td><td>4</td><td>A</td><td>170.00m²</td><td>36.00m²</td><td>2</td><td>1 395 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T3" data-fracao="4A" data-preco="1 395 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T5</td><td>6</td><td>A</td><td>231.00m²</td><td>107.00m²</td><td>2</td><td>2 250 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T5" data-fracao="6A" data-preco="2 250 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                            <tr><td>Apartamento</td><td>T5</td><td>6</td><td>B</td><td>231.00m²</td><td>107.00m²</td><td>1</td><td>2 250 000 €</td><td>-</td><td><button class="btn reserve-btn" data-tipologia="T5" data-fracao="6B" data-preco="2 250 000 €" data-translate="btn_reservar">Reservar</button></td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </section>
        
        <!-- ======================= SEÇÃO LOCALIZAÇÃO ======================== -->
        <section id="ubicacion">
            <div class="container">
                <h2 data-translate="ubicacion_titulo">Localização Privilegiada</h2>
                <p data-translate="ubicacion_desc">Situado na prestigiada zona do Campo Alegre, com acesso imediato aos principais serviços, zonas verdes, centros culturais e vias de comunicação da cidade. Uma localização que combina tranquilidade e vida urbana.</p>
            </div>
            <div class="map-container">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d6008.307998687258!2d-8.64731882330765!3d41.15312377133036!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0xd2465a570624777%3A0x8678786915b5722!2sCampo%20Alegre%2C%20Porto!5e0!3m2!1spt-PT!2spt!4v1725983281575!5m2!1spt-PT!2spt" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
            </div>
        </section>

        <!-- ======================= SEÇÃO AGÊNCIA DOURO ======================== -->
        <section id="sobre-nos">
            <div class="container">
                <h2 data-translate="agencia_titulo">Agência Douro</h2>
                <p data-translate="agencia_desc">Na Agência Douro, a nossa missão é transformar sonhos em realidade, sempre com um compromisso inabalável com a transparência e a responsabilidade. A nossa equipa é composta por profissionais altamente qualificados, prontos para o ajudar a realizar o sonho da sua vida.</p>
                <h3 data-translate="agencia_subtitle" style="text-align: center; font-size: 1.5rem; margin-top: 3rem; font-weight: 600;">Porque escolher a Agência Douro?</h3>
                <p data-translate="agencia_desc2">A atuar no mercado nacional e internacional, a Agência Douro é reconhecida pela sua transparência, responsabilidade e compromisso em proporcionar tranquilidade em cada transação. Seja para habitação própria ou para investimento, oferecemos um apoio completo para garantir que o seu negócio seja seguro e eficaz.</p>
                
                <div class="agency-contact-details">
                    <div class="contact-block">
                        <p>Douro Real Estate Agency</p>
                        <p>AMI 17 632</p>
                        <p>Conde Alto Mearim Street, No. 1133</p>
                        <p>5th Floor, Room 55 - Via Europa Building</p>
                        <p>4450-036 - Matosinhos, Porto</p>
                    </div>
                    <div class="contact-block">
                         <p><a href="mailto:contacto@agenciadouro.pt">contacto@agenciadouro.pt</a></p>
                         <p><a href="mailto:mariamartins@agenciadouro.pt">mariamartins@agenciadouro.pt</a></p>
                         <p><a href="https://wa.me/351919766323" target="_blank">+351 919 766 323</a></p>
                         <p><a href="https://wa.me/351919766324" target="_blank">+351 919 766 324</a></p>
                         <div class="social-icons">
                            <a href="https://www.facebook.com/AgenciaDouro/" target="_blank" aria-label="Facebook"><i data-feather="facebook"></i></a>
                            <a href="https://www.instagram.com/agenciadouro/" target="_blank" aria-label="Instagram"><i data-feather="instagram"></i></a>
                            <a href="https://www.youtube.com/channel/UCGJZI52b1FKoQm_FQ5XtZgw" target="_blank" aria-label="YouTube"><i data-feather="youtube"></i></a>
                            <a href="https://www.agenciadouro.pt/" target="_blank" aria-label="Website"><i data-feather="globe"></i></a>
                        </div>
                    </div>
                </div>

            </div>
        </section>

        <!-- ======================= SEÇÃO CONTACTO ======================== -->
        <section id="contacto">
            <div class="container">
                <h2 data-translate="contacto_titulo">Contacto</h2>
                <p data-translate="contacto_desc">Interessado em saber mais? Deixe-nos a sua mensagem e entraremos em contacto consigo o mais brevemente possível para lhe fornecer toda a informação de que necessita.</p>
                <form class="contact-form" id="contact-form">
                    <div class="form-group">
                        <input type="text" id="nombre" name="nombre" data-translate-placeholder="form_nombre" placeholder="Nome Completo" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="email" name="email" data-translate-placeholder="form_email" placeholder="Endereço de Email" required>
                    </div>
                    <div class="form-group form-group-full">
                        <textarea id="mensaje" name="mensaje" rows="6" data-translate-placeholder="form_mensaje" placeholder="A sua mensagem" required></textarea>
                    </div>
                    <div class="form-group form-group-full" style="text-align: center;">
                        <button type="submit" class="btn" id="submit-btn" data-translate="form_btn">Enviar Mensagem</button>
                    </div>
                     <div id="form-status" class="form-group form-group-full"></div>
                </form>
            </div>
        </section>
        
    </main>

    <!-- ======================= FOOTER ======================== -->
    <footer>
        <div class="container">
            <p data-translate-html="footer_copy"></p>
        </div>
    </footer>

    <!-- ======================= MODAL DETALHES ======================== -->
    <div class="modal" id="apartment-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" aria-label="Fechar">&times;</button>
            <div id="modal-body">
                <!-- Conteúdo do Modal de detalhes será injetado aqui via JavaScript -->
            </div>
        </div>
    </div>
    
    <!-- ======================= MODAL RESERVA ======================== -->
    <div class="modal" id="reservation-modal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <button class="modal-close" aria-label="Fechar">&times;</button>
            <div id="reservation-modal-body">
                <h2 data-translate="reservation_title">Pedido de Reserva</h2>
                <p data-translate="reservation_desc">Por favor, preencha os seus dados para solicitar a reserva da seguinte unidade:</p>
                <div id="reservation-unit-details"></div>
                <form id="reservation-form" class="contact-form">
                    <input type="hidden" id="reservation-tipologia" name="tipologia">
                    <input type="hidden" id="reservation-fracao" name="fracao">
                    <input type="hidden" id="reservation-preco" name="preco">
                    <div class="form-group">
                         <input type="text" id="reservation-nombre" name="nombre" data-translate-placeholder="form_nombre" placeholder="Nome Completo" required>
                    </div>
                    <div class="form-group">
                        <input type="email" id="reservation-email" name="email" data-translate-placeholder="form_email" placeholder="Endereço de Email" required>
                    </div>
                     <div class="form-group form-group-full">
                        <input type="tel" id="reservation-phone" name="phone" data-translate-placeholder="form_phone" placeholder="Telefone" required>
                    </div>
                    <div class="form-group form-group-full">
                        <textarea id="reservation-mensaje" name="mensaje" rows="4" data-translate-placeholder="form_mensaje_optional" placeholder="Mensagem (opcional)"></textarea>
                    </div>
                    <div class="form-group form-group-full" style="text-align: center;">
                        <button type="submit" class="btn" id="reservation-submit-btn" data-translate="btn_send_reservation">Enviar Pedido</button>
                    </div>
                    <div id="reservation-form-status" class="form-group form-group-full"></div>
                </form>
            </div>
        </div>
    </div>


    <!-- Feather Icons -->
    <script src="https://unpkg.com/feather-icons"></script>
    
    <!-- Firebase SDKs -->
    <script type="module">
        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-analytics.js";

        // Your web app's Firebase configuration
        const firebaseConfig = {
            apiKey: "AIzaSyCshWmJrnK6yc7VpMxua01rIdF4M7O9odU",
            authDomain: "campoalegre-b3914.firebaseapp.com",
            projectId: "campoalegre-b3914",
            storageBucket: "campoalegre-b3914.appspot.com",
            messagingSenderId: "456792192654",
            appId: "1:456792192654:web:e4a72fa914d0f1d78a3bdf",
            measurementId: "G-WJ8MSFCTY5"
        };

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const analytics = getAnalytics(app);
        
        // --- Firebase Auth ---
        async function setupAuth() {
            try {
                await signInAnonymously(auth);
            } catch (error) {
                console.error("Firebase auth error:", error);
            }
        }


        // --- SCRIPT PARA MENÚ MÓVIL ---
        const mobileMenuButton = document.getElementById('mobile-menu');
        const navMenu = document.getElementById('nav-menu');
        const navbar = document.getElementById('navbar');

        mobileMenuButton.addEventListener('click', () => {
            navMenu.classList.toggle('active');
            navbar.classList.toggle('nav-open');
        });

        navMenu.querySelectorAll('a').forEach(link => {
            link.addEventListener('click', () => {
                navMenu.classList.remove('active');
                navbar.classList.remove('nav-open');
            });
        });

        // --- SCRIPT CARRUSEL APARTAMENTOS ---
        const carousel = document.getElementById('apartments-carousel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        if (carousel) {
            nextBtn.addEventListener('click', () => {
                const cardWidth = carousel.querySelector('.apartment-card').offsetWidth;
                carousel.scrollLeft += cardWidth * 1; // Mueve una tarjeta a la vez
            });

            prevBtn.addEventListener('click', () => {
                const cardWidth = carousel.querySelector('.apartment-card').offsetWidth;
                carousel.scrollLeft -= cardWidth * 1;
            });
        }
        
        // --- SCRIPT AMENITIES CAROUSEL ---
        const amenitiesCarousel = document.getElementById('amenities-carousel');
        const amenitiesPrevBtn = document.getElementById('amenitiesPrevBtn');
        const amenitiesNextBtn = document.getElementById('amenitiesNextBtn');

        if (amenitiesCarousel) {
            amenitiesNextBtn.addEventListener('click', () => {
                const slideWidth = amenitiesCarousel.offsetWidth;
                amenitiesCarousel.scrollLeft += slideWidth;
            });

            amenitiesPrevBtn.addEventListener('click', () => {
                const slideWidth = amenitiesCarousel.offsetWidth;
                amenitiesCarousel.scrollLeft -= slideWidth;
            });
        }


        // --- SCRIPT HERO SLIDESHOW ---
        const heroSection = document.getElementById('hero');
        
        const heroImages = [
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-8.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-7.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-3.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-4.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/EXT-5.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/INT_COMUNS-12.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/QUARTO_INTEIRO-1-2048x852.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/SALA_.jpg',
            'https://raw.githubusercontent.com/wagmimedia/campoalegre1024/refs/heads/main/WC_ULTIMO_PISO.jpg'
        ];

        let currentImageIndex = 0;

        if (heroImages.length > 1) {
            setInterval(() => {
                currentImageIndex = (currentImageIndex + 1) % heroImages.length;
                
                heroSection.classList.add('hero-fade-out');

                setTimeout(() => {
                    const newImageUrl = `linear-gradient(rgba(0, 0, 0, 0.4), rgba(0, 0, 0, 0.4)), url('${heroImages[currentImageIndex]}')`;
                    heroSection.style.backgroundImage = newImageUrl;
                    heroSection.classList.remove('hero-fade-out');
                }, 500); // Coincide con la duración de la transición de opacidad

            }, 5000); // Cambia cada 5 segundos
        }


        // --- SCRIPT DE TRADUCCIÓN Y MODAL ---
        document.addEventListener('DOMContentLoaded', async () => {
            // Setup Auth first
            await setupAuth();
            
            const translations = {
                'pt': {
                    title: 'Agência Douro | Projeto Imobiliário',
                    nav_proyecto: 'O Projeto',
                    nav_apartamentos: 'Apartamentos',
                    nav_ubicacion: 'Localização',
                    nav_agencia: 'Agência Douro',
                    nav_contacto: 'Contacto',
                    hero_titulo: 'Viver no Coração do Porto',
                    hero_subtitulo: 'Um projeto exclusivo que redefine a elegância urbana. Descubra a sua nova casa no Campo Alegre.',
                    hero_btn: 'Saber mais',
                    proyecto_titulo: 'Design e Exclusividade',
                    proyecto_p1: 'Este é um empreendimento residencial com uma arquitetura contemporânea, de linhas retas e sóbrias, que se integra harmoniosamente nos jardins circundantes. O piso do átrio principal dispõe de um oásis de lazer e descontração com diversas salas sociais, de wellness e jardins privados.',
                    proyecto_p2: 'Os 30 apartamentos, com tipologias de T1 a T5, combinam modernidade e funcionalidade, criando ambientes confortáveis para quem procura o bem-estar. Todas as habitações, das quais duas moradias e duas penthouses, têm uma forte relação com os espaços exteriores.',
                    amenities_titulo: 'Comodidades',
                    apartamentos_titulo: 'Apartamentos Destacados',
                    btn_detalhes: 'Mais detalhes',
                    cta_ver_tabela: 'Ver Todas as Frações',
                    cta_ocultar_tabela: 'Ocultar Tabela',
                    th_natureza: 'Natureza',
                    th_tipologia: 'Tipologia',
                    th_piso: 'Piso',
                    th_fracao: 'Fração',
                    th_area_bruta: 'Área Bruta',
                    th_area_exterior: 'Área Exterior',
                    th_estacionamento: 'Estacionamento',
                    th_preco: 'Preço',
                    th_plantas: 'Plantas',
                    th_reservar: 'Reservas',
                    btn_reservar: 'Reservar',
                    apt_penthouse_title: 'Penthouse T5',
                    apt_penthouse_desc: '231 m² | 2.250.000 €',
                    apt_moradia_title: 'Moradia T2+1',
                    apt_moradia_desc: '164,50 m² | 1.215.000 €',
                    apt_patio_title: 'Apartamento Pátio T2',
                    apt_patio_desc: '89,50 m² | 720.000 €',
                    apt_t1_title: 'Apartamento T1',
                    apt_t1_desc: '52 m² | 400.000 €',
                    ubicacion_titulo: 'Localização Privilegiada',
                    ubicacion_desc: 'Situado na prestigiada zona do Campo Alegre, com acesso imediato aos principais serviços, zonas verdes, centros culturais e vias de comunicação da cidade. Uma localização que combina tranquilidade e vida urbana.',
                    agencia_titulo: 'Agência Douro',
                    agencia_desc: 'Na Agência Douro, a nossa missão é transformar sonhos em realidade, sempre com um compromisso inabalável com a transparência e a responsabilidade. A nossa equipa é composta por profissionais altamente qualificados, prontos para o ajudar a realizar o sonho da sua vida.',
                    agencia_subtitle: 'Porque escolher a Agência Douro?',
                    agencia_desc2: 'A atuar no mercado nacional e internacional, a Agência Douro é reconhecida pela sua transparência, responsabilidade e compromisso em proporcionar tranquilidade em cada transação. Seja para habitação própria ou para investimento, oferecemos um apoio completo para garantir que o seu negócio seja seguro e eficaz.',
                    contacto_titulo: 'Contacto',
                    contacto_desc: 'Interessado em saber mais? Deixe-nos a sua mensagem e entraremos em contacto consigo o mais brevemente possível para lhe fornecer toda a informação de que necessita.',
                    form_nombre: 'Nome Completo',
                    form_email: 'Endereço de Email',
                    form_phone: 'Telefone',
                    form_mensaje: 'A sua mensagem',
                    form_mensaje_optional: 'Mensagem (opcional)',
                    form_btn: 'Enviar Mensagem',
                    btn_send_reservation: 'Enviar Pedido de Reserva',
                    footer_copy: '© 2025 <a href="https://agenciadouro.pt" target="_blank" rel="noopener noreferrer">Agência Douro</a>. Todos os direitos reservados. Powered by <a href="https://wagmimedia.agency" target="_blank" rel="noopener noreferrer">WMA</a>.',
                    form_success: 'Mensagem enviada com sucesso!',
                    form_error: 'Ocorreu um erro. Por favor, tente novamente.',
                    reservation_title: 'Pedido de Reserva',
                    reservation_desc: 'Por favor, preencha os seus dados para solicitar a reserva da seguinte unidade:',
                    // Detalles del Modal - Penthouse
                    penthouse_details: {
                        title: 'Detalhes da Penthouse T5',
                        desc: 'Apartamento T5 com 231,00 m² de área bruta privativa, 120,00 m² de área exterior composta por um terraço de 107,00 m² e uma piscina de 13,00 m², box com portão motorizado com 4 lugares de estacionamento e arrecadação.',
                        subtitle1: 'Características do Imóvel:',
                        features1: [
                            '05 quartos, dos quais 04 são suítes completas',
                            '05 casas de banho, das quais 01 é de serviço',
                            'Sala de estar',
                            'Sala de jantar',
                            'Escritório',
                            'Cozinha independente equipada com eletrodomésticos Bosch',
                            'Lavandaria',
                            'Terraço, com 107,00 m² com acesso pelo escritório, biblioteca e sala de estar, e com uma área privada para a suíte principal',
                            'Piscina privada com 13,00 m²',
                            'Box com 4 lugares de estacionamento',
                            'Arrecadação',
                            'Orientação solar: nascente/poente'
                        ],
                        subtitle2: 'Características de acabamentos e equipamentos:',
                        features2: [
                            'Caixilharia de alumínio com corte térmico',
                            'Cozinha equipada com eletrodomésticos Bosch',
                            'Domótica',
                            'Ar condicionado por condutas',
                            'Box com portão motorizado',
                            'Pré-instalação para carregamento de veículos elétricos',
                            'Parque para bicicletas',
                            'Bomba de calor para aquecimento de águas sanitárias',
                            'Elevadores do tipo Schmitt + Sohn'
                        ]
                    },
                    // Detalles del Modal - Moradia
                    moradia_details: {
                        title: 'Detalhes da Moradia T2+1',
                        desc: 'Moradia T2+1 com 164,50 m² de área bruta privativa. 58,50 m² de área exterior constituída por terraço com 7,00 m², jardim 27,50 m² e pátio 21,50 m², box com portão motorizado com 2 lugares de garagem e arrumo.',
                        subtitle1: 'Características do Imóvel:',
                        features1: [
                            '02 Quartos sendo 02 suítes completas',
                            '03 Casas de banho sendo 01 de serviço',
                            'Escritório',
                            'Sala de Estar / Jantar',
                            'Cozinha independente equipada com eletrodomésticos Bosch',
                            'Lavandaria',
                            'Terraço com 7,00 m² com acesso pela Sala, jardim 27,50 m² e acesso pela sala de jantar. Pátio interior de 21,50 m²',
                            'Box com 02 lugares de garagem',
                            'Arrumos',
                            'Orientação solar: nascente/poente'
                        ],
                        subtitle2: 'Características dos acabamentos e equipamentos:',
                        features2: [
                            'Caixilharia de alumínio com corte térmico',
                            'Cozinha equipada com eletrodomésticos da marca Bosch',
                            'Domótica',
                            'Ar Condicionado por condutas',
                            'Box com portão motorizado',
                            'Pré-instalação para carregamento de veículos elétricos',
                            'Parque para bicicletas',
                            'Bomba de calor para aquecimento das águas sanitárias',
                            'Elevadores do tipo Schmitt + Sohn'
                        ],
                        subtitle3: 'Espaços Comuns:',
                        features3: [
                            'Áreas exteriores',
                            'Salas sociais',
                            'Ginásio equipado',
                            'Espaço Wellness'
                        ]
                    },
                    // Detalles del Modal - Patio
                    patio_details: {
                        title: 'Detalhes do Apartamento Pátio T2',
                        desc: 'Apartamento T2 no 1º andar pátio, com 89,50 m2 de área bruta privativa. 67,50 m2 de jardim, box com portão motorizado com 2 lugares de garagem e arrumo.',
                        subtitle1: 'Características do Imóvel:',
                        features1: [
                            '02 Quartos sendo 01 suíte master',
                            '02 Casas de banho sendo 01 suite master',
                            'Closet suite master',
                            'Sala de Estar / Jantar',
                            'Cozinha equipada com eletrodomésticos Bosch',
                            'Lavandaria',
                            'Jardim 67,50m2',
                            'Box com 02 lugares de garagem',
                            'Arrumos',
                            'Orientação solar: nascente/poente'
                        ],
                        subtitle2: 'Características dos acabamentos e equipamentos:',
                        features2: [
                            'Caixilharia de alumínio com corte térmico',
                            'Cozinha equipada com eletrodomésticos da marca Bosch',
                            'Domótica',
                            'Ar Condicionado por condutas',
                            'Box com portão motorizado',
                            'Pré-instalação para carregamento de veículos elétricos',
                            'Parque para bicicletas',
                            'Bomba de calor para aquecimento das águas sanitárias',
                            'Elevadores do tipo Schmitt + Sohn'
                        ],
                        subtitle3: 'Espaços Comuns:',
                        features3: [
                            'Áreas exteriores',
                            'Salas sociais',
                            'Ginásio equipado',
                            'Espaço Wellness'
                        ]
                    },
                     // Detalles del Modal - T1
                    t1_details: {
                        title: 'Detalhes do Apartamento T1',
                        desc: 'Apartamento T1 no 2º andar, 52,00 m2 de área bruta privativa. 06,50 m2 de varanda, box.',
                        subtitle1: 'Características do Imóvel:',
                        features1: [
                            '01 Quarto',
                            '01 Casa de banho',
                            'Cozinha equipada com eletrodomésticos Bosch/ Jantar',
                            'Sala de estar',
                            'Lavandaria',
                            'Varanda 06,50m2',
                            'Box com 01 lugar de garagem',
                            'Arrumos',
                            'Orientação solar: nascente/poente'
                        ],
                        subtitle2: 'Características dos acabamentos e equipamentos:',
                        features2: [
                            'Caixilharia de alumínio com corte térmico',
                            'Cozinha equipada com eletrodomésticos da marca Bosch',
                            'Domótica',
                            'Ar Condicionado por condutas',
                            'Box com portão motorizado',
                            'Pré-instalação para carregamento de veículos elétricos',
                            'Parque para bicicletas',
                            'Bomba de calor para aquecimento das águas sanitárias',
                            'Elevadores do tipo Schmitt + Sohn'
                        ],
                        subtitle3: 'Espaços Comuns:',
                        features3: [
                            'Áreas exteriores',
                            'Salas sociais',
                            'Ginásio equipado',
                            'Espaço Wellness'
                        ]
                    }
                },
                'es': {
                    title: 'Agencia Douro | Proyecto Inmobiliario',
                    nav_proyecto: 'El Proyecto',
                    nav_apartamentos: 'Apartamentos',
                    nav_ubicacion: 'Ubicación',
                    nav_agencia: 'Agencia Douro',
                    nav_contacto: 'Contacto',
                    hero_titulo: 'Vivir en el Corazón de Oporto',
                    hero_subtitulo: 'Un proyecto exclusivo que redefine la elegancia urbana. Descubre tu nuevo hogar en Campo Alegre.',
                    hero_btn: 'Saber más',
                    proyecto_titulo: 'Diseño y Exclusividad',
                    proyecto_p1: 'Este es un desarrollo residencial con una arquitectura contemporánea, de líneas rectas y sobrias, que se integra armoniosamente en los jardines circundantes. La planta del vestíbulo principal cuenta con un oasis de ocio y relajación con varias salas sociales, de bienestar y jardines privados.',
                    proyecto_p2: 'Los 30 apartamentos, con tipologías de T1 a T5, combinan modernidad y funcionalidad, creando ambientes confortables para quienes buscan el bienestar. Todas las viviendas, de las cuales dos son villas y dos son áticos, tienen una fuerte relación con los espacios exteriores.',
                    amenities_titulo: 'Amenidades',
                    apartamentos_titulo: 'Apartamentos Destacados',
                    btn_detalhes: 'Más detalles',
                    cta_ver_tabela: 'Ver Todas las Fracciones',
                    cta_ocultar_tabela: 'Ocultar Tabla',
                    th_natureza: 'Naturaleza',
                    th_tipologia: 'Tipología',
                    th_piso: 'Piso',
                    th_fracao: 'Fracción',
                    th_area_bruta: 'Área Bruta',
                    th_area_exterior: 'Área Exterior',
                    th_estacionamento: 'Estacionamiento',
                    th_preco: 'Precio',
                    th_plantas: 'Planos',
                    th_reservar: 'Reservas',
                    btn_reservar: 'Reservar',
                    apt_penthouse_title: 'Penthouse T5',
                    apt_penthouse_desc: '231 m² | 2.250.000 €',
                    apt_moradia_title: 'Villa T2+1',
                    apt_moradia_desc: '164,50 m² | 1.215.000 €',
                    apt_patio_title: 'Apartamento con Patio T2',
                    apt_patio_desc: '89,50 m² | 720.000 €',
                    apt_t1_title: 'Apartamento T1',
                    apt_t1_desc: '52 m² | 400.000 €',
                    ubicacion_titulo: 'Ubicación Privilegiada',
                    ubicacion_desc: 'Situado en la prestigiosa zona de Campo Alegre, con acceso inmediato a los principales servicios, zonas verdes, centros culturales y vías de comunicación de la ciudad. Una localización que combina tranquilidad y vida urbana.',
                    agencia_titulo: 'Agencia Douro',
                    agencia_desc: 'En Agência Douro, nuestra misión es convertir los sueños en realidad, siempre con un compromiso inquebrantable con la transparencia y la responsabilidad. Nuestro equipo está compuesto por profesionales altamente cualificados, listos para ayudarle a realizar el sueño de su vida.',
                    agencia_subtitle: '¿Por qué elegir Agência Douro?',
                    agencia_desc2: 'Operando tanto en el mercado nacional como en el internacional, Agência Douro es reconocida por su transparencia, responsabilidad y compromiso de proporcionar tranquilidad en cada transacción. Ya sea para vivienda propia o para inversión, ofrecemos un apoyo integral para garantizar que su negocio sea seguro y eficaz.',
                    contacto_titulo: 'Contacto',
                    contacto_desc: '¿Interesado en saber más? Déjanos tu mensaje y te contactaremos a la brevedad para ofrecerte toda la información que necesites.',
                    form_nombre: 'Nombre Completo',
                    form_email: 'Correo Electrónico',
                    form_phone: 'Teléfono',
                    form_mensaje: 'Tu mensaje',
                    form_mensaje_optional: 'Mensaje (opcional)',
                    form_btn: 'Enviar Mensaje',
                    btn_send_reservation: 'Enviar Solicitud de Reserva',
                    footer_copy: '© 2025 <a href="https://agenciadouro.pt" target="_blank" rel="noopener noreferrer">Agencia Douro</a>. Todos los derechos reservados. Powered by <a href="https://wagmimedia.agency" target="_blank" rel="noopener noreferrer">WMA</a>.',
                    form_success: '¡Mensaje enviado con éxito!',
                    form_error: 'Ocurrió un error. Por favor, inténtalo de nuevo.',
                    reservation_title: 'Solicitud de Reserva',
                    reservation_desc: 'Por favor, rellene sus datos para solicitar la reserva de la siguiente unidad:',
                     // Detalles del Modal - Penthouse
                    penthouse_details: {
                        title: 'Detalles del Penthouse T5',
                        desc: 'Apartamento de 5 dormitorios con 231,00 m² de área bruta privada, 120,00 m² de área exterior que consta de una terraza de 107,00 m² y una piscina de 13,00 m², box con portón motorizado con 4 plazas de aparcamiento y trastero.',
                        subtitle1: 'Características del Inmueble:',
                        features1: [
                           '05 dormitorios, de los cuales 04 son suites completas',
                           '05 baños, de los cuales 01 es de servicio',
                           'Sala de estar',
                           'Comedor',
                           'Despacho',
                           'Cocina independiente equipada con electrodomésticos Bosch',
                           'Lavandería',
                           'Terraza, con 107,00 m² con acceso desde el despacho, la biblioteca y la sala de estar, y con un área privada para la suite principal',
                           'Piscina privada de 13,00 m²',
                           'Box con 4 plazas de aparcamiento',
                           'Trastero',
                           'Orientación solar: este/oeste'
                        ],
                        subtitle2: 'Características de acabados y equipamiento:',
                        features2: [
                            'Carpintería de aluminio con rotura de puente térmico',
                            'Cocina equipada con electrodomésticos Bosch',
                            'Domótica',
                            'Aire acondicionado por conductos',
                            'Box con portón motorizado',
                            'Preinstalación para carga de vehículos eléctricos',
                            'Aparcamiento para bicicletas',
                            'Bomba de calor para calentamiento de aguas sanitarias',
                            'Ascensores tipo Schmitt + Sohn'
                        ]
                    },
                     // Detalles del Modal - Moradia
                    moradia_details: {
                        title: 'Detalles de la Villa T2+1',
                        desc: 'Villa T2+1 con 164,50 m² de área bruta privada. 58,50 m² de área exterior compuesta por terraza de 7,00 m², jardín de 27,50 m² y patio de 21,50 m², box con portón motorizado con 2 plazas de garaje y trastero.',
                        subtitle1: 'Características del Inmueble:',
                        features1: [
                            '02 Dormitorios siendo 02 suites completas',
                            '03 Baños siendo 01 de servicio',
                            'Despacho',
                            'Salón / Comedor',
                            'Cocina independiente equipada con electrodomésticos Bosch',
                            'Lavandería',
                            'Terraza de 7,00 m² con acceso desde el Salón, jardín de 27,50 m² con acceso desde el comedor. Patio interior de 21,50 m²',
                            'Box con 02 plazas de garaje',
                            'Trastero',
                            'Orientación solar: este/oeste'
                        ],
                        subtitle2: 'Características de acabados y equipamiento:',
                        features2: [
                            'Carpintería de aluminio con rotura de puente térmico',
                            'Cocina equipada con electrodomésticos Bosch',
                            'Domótica',
                            'Aire acondicionado por conductos',
                            'Box con portón motorizado',
                            'Preinstalación para carga de vehículos eléctricos',
                            'Aparcamiento para bicicletas',
                            'Bomba de calor para calentamiento de aguas sanitarias',
                            'Ascensores tipo Schmitt + Sohn'
                        ],
                        subtitle3: 'Zonas Comunes:',
                        features3: [
                            'Zonas exteriores',
                            'Salas sociales',
                            'Gimnasio equipado',
                            'Espacio Wellness'
                        ]
                    },
                    // Detalles del Modal - Patio
                    patio_details: {
                        title: 'Detalles del Apartamento con Patio T2',
                        desc: 'Apartamento T2 en el 1er piso con patio, con 89,50 m² de área bruta privada. 67,50 m² de jardín, box con portón motorizado con 2 plazas de garaje y trastero.',
                        subtitle1: 'Características del Inmueble:',
                        features1: [
                            '02 Dormitorios, siendo 01 suite principal',
                            '02 Baños, siendo 01 en la suite principal',
                            'Vestidor en la suite principal',
                            'Salón / Comedor',
                            'Cocina equipada con electrodomésticos Bosch',
                            'Lavandería',
                            'Jardín de 67,50m²',
                            'Box con 02 plazas de garaje',
                            'Trastero',
                            'Orientación solar: este/oeste'
                        ],
                        subtitle2: 'Características de acabados y equipamiento:',
                        features2: [
                            'Carpintería de aluminio con rotura de puente térmico',
                            'Cocina equipada con electrodomésticos Bosch',
                            'Domótica',
                            'Aire acondicionado por conductos',
                            'Box con portón motorizado',
                            'Preinstalación para carga de vehículos eléctricos',
                            'Aparcamiento para bicicletas',
                            'Bomba de calor para calentamiento de aguas sanitarias',
                            'Ascensores tipo Schmitt + Sohn'
                        ],
                        subtitle3: 'Zonas Comunes:',
                        features3: [
                            'Zonas exteriores',
                            'Salas sociales',
                            'Gimnasio equipado',
                            'Espacio Wellness'
                        ]
                    },
                    // Detalles del Modal - T1
                    t1_details: {
                        title: 'Detalles del Apartamento T1',
                        desc: 'Apartamento T1 en la 2ª planta, 52,00 m² de superficie bruta privada. Balcón de 6,50 m², box.',
                        subtitle1: 'Características del Inmueble:',
                        features1: [
                            '01 Dormitorio',
                            '01 Baño',
                            'Cocina/Comedor equipada con electrodomésticos Bosch',
                            'Sala de estar',
                            'Lavandería',
                            'Balcón de 6,50m²',
                            'Box con 1 plaza de garaje',
                            'Trastero',
                            'Orientación solar: este/oeste'
                        ],
                        subtitle2: 'Características de acabados y equipamiento:',
                        features2: [
                            'Carpintería de aluminio con rotura de puente térmico',
                            'Cocina equipada con electrodomésticos Bosch',
                            'Domótica',
                            'Aire acondicionado por conductos',
                            'Box con portón motorizado',
                            'Preinstalación para carga de vehículos eléctricos',
                            'Aparcamiento para bicicletas',
                            'Bomba de calor para calentamiento de aguas sanitarias',
                            'Ascensores tipo Schmitt + Sohn'
                        ],
                        subtitle3: 'Zonas Comunes:',
                        features3: [
                            'Zonas exteriores',
                            'Salas sociales',
                            'Gimnasio equipado',
                            'Espacio Wellness'
                        ]
                    }
                },
                'en': {
                    title: 'Douro Agency | Real Estate Project',
                    nav_proyecto: 'The Project',
                    nav_apartamentos: 'Apartments',
                    nav_ubicacion: 'Location',
                    nav_agencia: 'Douro Agency',
                    nav_contacto: 'Contact',
                    hero_titulo: 'Living in the Heart of Porto',
                    hero_subtitulo: 'An exclusive project that redefines urban elegance. Discover your new home at Campo Alegre.',
                    hero_btn: 'Learn more',
                    proyecto_titulo: 'Design and Exclusivity',
                    proyecto_p1: 'This is a residential development with a contemporary architecture of straight, sober lines that blend harmoniously into the surrounding gardens. The main lobby floor features an oasis of leisure and relaxation with several social rooms, a wellness area, and private gardens.',
                    proyecto_p2: 'The 30 apartments, ranging from T1 to T5, combine modernity and functionality, creating comfortable environments for those seeking well-being. All homes, including two villas and two penthouses, have a strong connection to the outdoor spaces.',
                    amenities_titulo: 'Amenities',
                    apartamentos_titulo: 'Featured Apartments',
                    btn_detalhes: 'More details',
                    cta_ver_tabela: 'View All Units',
                    cta_ocultar_tabela: 'Hide Table',
                    th_natureza: 'Nature',
                    th_tipologia: 'Type',
                    th_piso: 'Floor',
                    th_fracao: 'Unit',
                    th_area_bruta: 'Gross Area',
                    th_area_exterior: 'Outdoor Area',
                    th_estacionamento: 'Parking',
                    th_preco: 'Price',
                    th_plantas: 'Floor Plans',
                    th_reservar: 'Reservations',
                    btn_reservar: 'Reserve',
                    apt_penthouse_title: 'Penthouse T5',
                    apt_penthouse_desc: '231 m² | €2,250,000',
                    apt_moradia_title: 'Villa T2+1',
                    apt_moradia_desc: '164.50 m² | €1,215,000',
                    apt_patio_title: 'Patio Apartment T2',
                    apt_patio_desc: '89.50 m² | €720,000',
                    apt_t1_title: '1-Bedroom Apartment',
                    apt_t1_desc: '52 m² | €400,000',
                    ubicacion_titulo: 'Privileged Location',
                    ubicacion_desc: 'Located in the prestigious area of Campo Alegre, with immediate access to the main services, green areas, cultural centers, and communication routes of the city. A location that combines tranquility and urban life.',
                    agencia_titulo: 'Douro Agency',
                    agencia_desc: "At Agência Douro, our mission is to turn dreams into reality, always with an unwavering commitment to transparency and accountability. Our team is comprised of highly qualified professionals, ready to help you realize your life's dream.",
                    agencia_subtitle: 'Why choose Agência Douro?',
                    agencia_desc2: 'Operating in both the national and international markets, Agência Douro is recognized for its transparency, responsibility, and commitment to providing peace of mind in every transaction. Whether for homeownership or investment, we offer comprehensive support to ensure your business is safe and effective.',
                    contacto_titulo: 'Contact',
                    contacto_desc: 'Interested in learning more? Leave us your message, and we will contact you shortly to provide you with all the information you need.',
                    form_nombre: 'Full Name',
                    form_email: 'Email Address',
                    form_phone: 'Phone Number',
                    form_mensaje: 'Your message',
                    form_mensaje_optional: 'Message (optional)',
                    form_btn: 'Send Message',
                    btn_send_reservation: 'Send Reservation Request',
                    footer_copy: '© 2025 <a href="https://agenciadouro.pt" target="_blank" rel="noopener noreferrer">Douro Agency</a>. All rights reserved. Powered by <a href="https://wagmimedia.agency" target="_blank" rel="noopener noreferrer">WMA</a>.',
                    form_success: 'Message sent successfully!',
                    form_error: 'An error occurred. Please try again.',
                    reservation_title: 'Reservation Request',
                    reservation_desc: 'Please fill in your details to request the reservation of the following unit:',
                    // Detalles del Modal - Penthouse
                    penthouse_details: {
                        title: 'Penthouse T5 Details',
                        desc: '5-bedroom apartment with 231.00 m² of private gross area, 120.00 m² of outdoor area consisting of a 107.00 m² terrace and a 13.00 m² swimming pool, box with motorized gate with 4 parking spaces and storage.',
                        subtitle1: 'Property Features:',
                        features1: [
                            '05 bedrooms, 04 of which are complete suites',
                            '05 bathrooms, 01 of which is a service bathroom',
                            'Living room',
                            'Dining room',
                            'Desk',
                            'Independent kitchen equipped with Bosch appliances',
                            'Laundry',
                            'Terrace, with 107.00 m² with access from the office, library and living room, and with a private area for the master suite',
                            'Private swimming pool measuring 13.00 m²',
                            'Box with 4 parking spaces',
                            'Storage',
                            'Solar orientation: east/west'
                        ],
                        subtitle2: 'Features of finishes and equipment:',
                        features2: [
                            'Aluminum frames with thermal break',
                            'Kitchen equipped with Bosch appliances',
                            'Home automation',
                            'Duct air conditioning',
                            'Box with motorized gate',
                            'Pre-installation for charging electric vehicles',
                            'Bicycle park',
                            'Heat pump for heating sanitary water',
                            'Schmitt + Sohn type elevators'
                        ]
                    },
                    // Detalles del Modal - Moradia
                    moradia_details: {
                        title: 'Villa T2+1 Details',
                        desc: 'T2+1 villa with 164.50 m² of private gross area. 58.50 m² of outdoor area consisting of a 7.00 m² terrace, a 27.50 m² garden, and a 21.50 m² patio, box with motorized gate with 2 garage spaces and storage.',
                        subtitle1: 'Property Features:',
                        features1: [
                            '02 Bedrooms, both of which are complete suites',
                            '03 Bathrooms, 01 of which is a service bathroom',
                            'Office',
                            'Living / Dining Room',
                            'Independent kitchen equipped with Bosch appliances',
                            'Laundry',
                            '7.00 m² terrace with access from the living room, 27.50 m² garden with access from the dining room. 21.50 m² interior patio',
                            'Box with 02 garage spaces',
                            'Storage',
                            'Solar orientation: east/west'
                        ],
                        subtitle2: 'Features of finishes and equipment:',
                        features2: [
                            'Aluminum frames with thermal break',
                            'Kitchen equipped with Bosch appliances',
                            'Home automation',
                            'Ducted Air Conditioning',
                            'Box with motorized gate',
                            'Pre-installation for charging electric vehicles',
                            'Bicycle park',
                            'Heat pump for domestic hot water',
                            'Schmitt + Sohn type elevators'
                        ],
                        subtitle3: 'Common Areas:',
                        features3: [
                            'Outdoor areas',
                            'Social rooms',
                            'Equipped gym',
                            'Wellness space'
                        ]
                    },
                    // Detalles del Modal - Patio
                    patio_details: {
                        title: 'Patio Apartment T2 Details',
                        desc: 'T2 apartment on the 1st floor with a patio, with 89.50 m² of private gross area. 67.50 m² garden, box with motorized gate with 2 garage spaces and storage.',
                        subtitle1: 'Property Features:',
                        features1: [
                            '02 Bedrooms, one of which is a master suite',
                            '02 Bathrooms, one of which is in the master suite',
                            'Master suite walk-in closet',
                            'Living / Dining Room',
                            'Kitchen equipped with Bosch appliances',
                            'Laundry',
                            '67.50 m² Garden',
                            'Box with 02 garage spaces',
                            'Storage',
                            'Solar orientation: east/west'
                        ],
                        subtitle2: 'Features of finishes and equipment:',
                        features2: [
                            'Aluminum frames with thermal break',
                            'Kitchen equipped with Bosch appliances',
                            'Home automation',
                            'Ducted Air Conditioning',
                            'Box with motorized gate',
                            'Pre-installation for charging electric vehicles',
                            'Bicycle park',
                            'Heat pump for domestic hot water',
                            'Schmitt + Sohn type elevators'
                        ],
                        subtitle3: 'Common Areas:',
                        features3: [
                            'Outdoor areas',
                            'Social rooms',
                            'Equipped gym',
                            'Wellness space'
                        ]
                    },
                     // Detalles del Modal - T1
                    t1_details: {
                        title: '1-Bedroom Apartment Details',
                        desc: 'T1 apartment on the 2nd floor, 52.00 m² of private gross area. 6.50 m² balcony, garage box.',
                        subtitle1: 'Property Features:',
                        features1: [
                            '01 Bedroom',
                            '01 Bathroom',
                            'Kitchen/Dining equipped with Bosch appliances',
                            'Living room',
                            'Laundry',
                            '6.50 m² Balcony',
                            'Box with 1 parking space',
                            'Storage',
                            'Solar orientation: east/west'
                        ],
                        subtitle2: 'Features of finishes and equipment:',
                        features2: [
                            'Aluminum frames with thermal break',
                            'Kitchen equipped with Bosch appliances',
                            'Home automation',
                            'Ducted Air Conditioning',
                            'Box with motorized gate',
                            'Pre-installation for charging electric vehicles',
                            'Bicycle park',
                            'Heat pump for domestic hot water',
                            'Schmitt + Sohn type elevators'
                        ],
                        subtitle3: 'Common Areas:',
                        features3: [
                            'Outdoor areas',
                            'Social rooms',
                            'Equipped gym',
                            'Wellness space'
                        ]
                    }
                }
            };

            const userLang = (navigator.language || navigator.userLanguage).slice(0, 2);
            const lang = translations[userLang] ? userLang : 'pt';
            
            document.documentElement.lang = lang;

            function translatePage() {
                document.title = translations[lang].title;

                document.querySelectorAll('[data-translate]').forEach(el => {
                    const key = el.getAttribute('data-translate');
                    if (translations[lang][key]) {
                        el.textContent = translations[lang][key];
                    }
                });

                document.querySelectorAll('[data-translate-placeholder]').forEach(el => {
                    const key = el.getAttribute('data-translate-placeholder');
                    if (translations[lang][key]) {
                        el.placeholder = translations[lang][key];
                    }
                });
                
                document.querySelectorAll('[data-translate-html]').forEach(el => {
                    const key = el.getAttribute('data-translate-html');
                    if (translations[lang][key]) {
                        el.innerHTML = translations[lang][key];
                    }
                });
            }
            
            translatePage();
            
            // --- LÓGICA DEL MODAL DE DETALLES ---
            const detailsModal = document.getElementById('apartment-modal');
            const detailsModalBody = document.getElementById('modal-body');
            const detailButtons = document.querySelectorAll('a[data-apartment-id]');

            detailButtons.forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const apartmentId = button.getAttribute('data-apartment-id');
                    const detailsKey = `${apartmentId}_details`;
                    
                    if (translations[lang][detailsKey]) {
                        const details = translations[lang][detailsKey];
                        let contentHTML = `<h2>${details.title}</h2><p>${details.desc}</p>`;
                        
                        if(details.subtitle1 && details.features1) {
                            contentHTML += `<h4>${details.subtitle1}</h4><ul>`;
                            details.features1.forEach(item => contentHTML += `<li>${item}</li>`);
                            contentHTML += `</ul>`;
                        }

                        if(details.subtitle2 && details.features2) {
                            contentHTML += `<h4>${details.subtitle2}</h4><ul>`;
                            details.features2.forEach(item => contentHTML += `<li>${item}</li>`);
                            contentHTML += `</ul>`;
                        }
                        
                        if(details.subtitle3 && details.features3) {
                            contentHTML += `<h4>${details.subtitle3}</h4><ul>`;
                            details.features3.forEach(item => contentHTML += `<li>${item}</li>`);
                            contentHTML += `</ul>`;
                        }

                        detailsModalBody.innerHTML = contentHTML;
                        detailsModal.classList.add('active');
                    }
                });
            });

            [detailsModal.querySelector('.modal-overlay'), detailsModal.querySelector('.modal-close')].forEach(el => {
                el.addEventListener('click', () => detailsModal.classList.remove('active'));
            });

            // --- LÓGICA DEL MODAL DE RESERVA ---
            const reservationModal = document.getElementById('reservation-modal');
            const reservationForm = document.getElementById('reservation-form');
            const reservationStatus = document.getElementById('reservation-form-status');
            const reservationSubmitBtn = document.getElementById('reservation-submit-btn');

            document.querySelectorAll('.reserve-btn').forEach(button => {
                button.addEventListener('click', (e) => {
                    e.preventDefault();
                    const tipologia = button.dataset.tipologia;
                    const fracao = button.dataset.fracao;
                    const preco = button.dataset.preco;

                    document.getElementById('reservation-unit-details').innerHTML = `<strong>${tipologia} | ${fracao}</strong><br>${preco}`;
                    reservationForm.tipologia.value = tipologia;
                    reservationForm.fracao.value = fracao;
                    reservationForm.preco.value = preco;
                    
                    reservationModal.classList.add('active');
                });
            });
            
             reservationForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                reservationSubmitBtn.disabled = true;
                reservationStatus.textContent = '';
                reservationStatus.classList.remove('form-status-success', 'form-status-error');

                try {
                    await addDoc(collection(db, 'reservationRequests'), {
                        unit_tipologia: reservationForm.tipologia.value,
                        unit_fracao: reservationForm.fracao.value,
                        unit_preco: reservationForm.preco.value,
                        client_name: reservationForm.nombre.value,
                        client_email: reservationForm.email.value,
                        client_phone: reservationForm.phone.value,
                        client_message: reservationForm.mensaje.value,
                        createdAt: serverTimestamp()
                    });

                    reservationStatus.textContent = translations[lang].form_success;
                    reservationStatus.classList.add('form-status-success');
                    setTimeout(() => {
                        reservationModal.classList.remove('active');
                        reservationForm.reset();
                        reservationStatus.textContent = '';
                    }, 2500);

                } catch (error) {
                    console.error("Error adding reservation: ", error);
                    reservationStatus.textContent = translations[lang].form_error;
                    reservationStatus.classList.add('form-status-error');
                } finally {
                    reservationSubmitBtn.disabled = false;
                }
            });

            [reservationModal.querySelector('.modal-overlay'), reservationModal.querySelector('.modal-close')].forEach(el => {
                el.addEventListener('click', () => reservationModal.classList.remove('active'));
            });
            
            // --- LÓGICA DEL FORMULARIO DE CONTACTO GENERAL ---
            const contactForm = document.getElementById('contact-form');
            const formStatus = document.getElementById('form-status');
            const submitBtn = document.getElementById('submit-btn');
            
            contactForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                submitBtn.disabled = true;
                formStatus.textContent = '';
                formStatus.classList.remove('form-status-success', 'form-status-error');

                const name = contactForm.nombre.value;
                const email = contactForm.email.value;
                const message = contactForm.mensaje.value;

                try {
                    await addDoc(collection(db, 'contactSubmissions'), {
                        name: name,
                        email: email,
                        message: message,
                        createdAt: serverTimestamp()
                    });

                    formStatus.textContent = translations[lang].form_success;
                    formStatus.classList.add('form-status-success');
                    contactForm.reset();

                } catch (error) {
                    console.error("Error adding document: ", error);
                    formStatus.textContent = translations[lang].form_error;
                    formStatus.classList.add('form-status-error');
                } finally {
                    submitBtn.disabled = false;
                }
            });

             // --- LÓGICA DE LA TABLA EXPANDIBLE ---
            const toggleBtn = document.getElementById('toggle-table-btn');
            const tableContainer = document.getElementById('apartments-table-container');

            toggleBtn.addEventListener('click', () => {
                tableContainer.classList.toggle('active');
                const isTableVisible = tableContainer.classList.contains('active');
                toggleBtn.textContent = isTableVisible ? translations[lang].cta_ocultar_tabela : translations[lang].cta_ver_tabela;
            });


            // Reemplaza los data-feather-iconos por SVGs
            feather.replace();
        });
    </script>

</body>
</html>
